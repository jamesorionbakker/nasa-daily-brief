(this["webpackJsonpnasa-app"]=this["webpackJsonpnasa-app"]||[]).push([[0],{129:function(t,e,a){},224:function(t,e,a){},226:function(t,e,a){},229:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),r=a(37),s=a.n(r),i=a(6),o=a.n(i),l=a(15),u=a(14),j=a(120),O=(a(129),a(116)),d=a.n(O);function b(t,e){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(o.a.mark((function t(e,a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("querying..."),t.next=3,d.a.get(e);case 3:return n=t.sent,t.abrupt("return",n.data);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var f=a(123),h=a(19),S=a.n(h),m=a(72),y=a(49),x=a(71),v=a.n(x),E=a(117),g=a.n(E),k=a(11),T=(a(224),a(26)),D=a(2),M=a(1);function I(t){var e=Object(k.b)(),a=t.date,n=Object(k.c)((function(t){return t.likes[a]}));return Object(M.jsx)("div",{className:"like-btn-container",children:Object(M.jsx)("button",{"aria-label":n?"un-like":"like",className:"like-button "+(n?"liked":"not-liked"),onClick:function(){var t;e(n?function(t){return function(){var e=Object(l.a)(o.a.mark((function e(a,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"LIKES/UNLIKE",payload:t}),c=n().likes,localStorage.setItem("likes",JSON.stringify(Object(D.a)(Object(D.a)({},c),{},Object(T.a)({},t,!1))));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}(a):(t=a,function(){var e=Object(l.a)(o.a.mark((function e(a,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"LIKES/LIKE",payload:t}),c=n().likes,localStorage.setItem("likes",JSON.stringify(Object(D.a)(Object(D.a)({},c),{},Object(T.a)({},t,!0))));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))},children:Object(M.jsx)("i",{"aria-hidden":"true",title:n?"un-like this post":"like this post",className:"fas fa-heart"})})})}a(226);var L=a(119),N=a.n(L);function Y(t){var e=t.post,a=Object(n.useState)(!1),c=Object(u.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(!1),o=Object(u.a)(i,2),l=o[0],j=o[1],O=function(){j(!l)};return Object(M.jsx)(g.a,{partialVisibility:!0,onChange:function(t){r||s(t)},children:Object(M.jsxs)("div",{className:"image-container",children:[Object(M.jsx)(I,{date:e.date}),Object(M.jsxs)(m.a,{children:[Object(M.jsxs)(y.a,{xs:12,md:4,className:"text-container",children:[Object(M.jsx)("h5",{children:Object(M.jsx)("em",{children:S()(e.date).format("MMMM DD, YYYY")})}),r&&!l&&Object(M.jsx)(v.a,{maxDelay:40,delayMap:[{at:/(\.)/,delay:300}],typing:1,fixed:!0,children:Object(M.jsxs)("span",{children:[N.a.truncate(e.explanation,{length:350,separator:" ",omission:" "}),Object(M.jsx)("button",{className:"link",onClick:O,href:"#",children:"...Read More"})]})}),r&&l&&Object(M.jsxs)("span",{children:[e.explanation," ",Object(M.jsx)("button",{className:"link",onClick:O,href:"#",children:"...Show Less"})]})]}),Object(M.jsxs)(y.a,{xs:12,md:8,children:[Object(M.jsx)("img",{style:{display:"inline"},src:e.thumbnail_url||e.url,alt:e.title}),Object(M.jsxs)("small",{children:["image copyright ".concat(e.copyright)," ",e.hdurl&&Object(M.jsx)("a",{href:e.hdurl,target:"_blank",children:"full size image"})]})]})]})]})})}var w=function(){return function(){var t=Object(l.a)(o.a.mark((function t(e,a){var n,c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a().posts.startDate.subtract(1,"day"),c=n.subtract(4,"day"),e({type:"POSTS/SET_LOADING_MORE"}),t.next=5,b("/images/?end_date=".concat(n.format("YYYY-MM-DD"),"&start_date=").concat(c.format("YYYY-MM-DD")));case 5:r=t.sent,e({type:"POSTS/SET_START_DATE",payload:c}),e({type:"POSTS/INSERT",payload:r}),e({type:"POSTS/SET_MORE_LOADED"});case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()};function _(){var t=Object(k.b)(),e=Object(k.c)((function(t){return t.posts.data})),a=Object(k.c)((function(t){return t.posts.initialPostsLoaded})),c=Object(k.c)((function(t){return t.posts.loadingMore})),r=Object(n.useState)(S()()),s=Object(u.a)(r,2),i=s[0],O=s[1];function d(){return(d=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(w());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){t(function(){var t=Object(l.a)(o.a.mark((function t(e,a){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a().posts.startDate,t.next=3,b("/images/?end_date=".concat(S()().format("YYYY-MM-DD"),"&start_date=").concat(n.format("YYYY-MM-DD")));case 3:c=t.sent,e({type:"POSTS/INSERT",payload:c}),e({type:"POSTS/SET_LOADED"});case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),t(function(){var t=Object(l.a)(o.a.mark((function t(e,a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=JSON.parse(localStorage.getItem("likes")),console.log(n),e({type:"LIKES/SET",payload:n})}catch(a){console.log(a)}case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){var t=setInterval((function(){O(S()())}),1e3);return function(){clearInterval(t)}})),Object(M.jsxs)(j.a,{fluid:!0,children:[Object(M.jsxs)("header",{children:[Object(M.jsx)("h1",{className:"title",children:"NASA DAILY BRIEF"}),Object(M.jsx)("h1",{className:"time",children:i.format("h:mm:ss")})]}),Object(M.jsxs)("main",{children:[!a&&Object(M.jsx)("i",{className:"fas fa-atom fa-spin loading-icon"}),a&&e.map((function(t){return Object(M.jsx)(Y,{post:t},t.date)})),a&&Object(M.jsx)(f.a,{className:"load-more-button",onClick:function(){return d.apply(this,arguments)},children:c?"Loading...":"Load More"})]}),a&&Object(M.jsx)("footer",{children:"Content Courtesy of NASA APOD API \u2022\xa0Copyright 2021 James Bakker"})]})}var A=a(29),P={};var R=a(74),K={startDate:S()().subtract(4,"day"),initialPostsLoaded:!1,loadingMore:!1,data:[]};var C=Object(A.combineReducers)({likes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LIKES/LIKE":return Object(D.a)(Object(D.a)({},t),{},Object(T.a)({},e.payload,!0));case"LIKES/UNLIKE":return Object(D.a)(Object(D.a)({},t),{},Object(T.a)({},e.payload,!1));case"LIKES/SET":return Object(D.a)({},e.payload);default:return Object(D.a)({},t)}},posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"POSTS/INSERT":return Object(D.a)(Object(D.a)({},t),{},{data:[].concat(Object(R.a)(t.data),Object(R.a)(e.payload))});case"POSTS/SET_LOADED":return Object(D.a)(Object(D.a)({},t),{},{initialPostsLoaded:!0});case"POSTS/SET_MORE_LOADED":return Object(D.a)(Object(D.a)({},t),{},{loadingMore:!1});case"POSTS/SET_LOADING_MORE":return Object(D.a)(Object(D.a)({},t),{},{loadingMore:!0});case"POSTS/SET_START_DATE":return Object(D.a)(Object(D.a)({},t),{},{startDate:e.payload});default:return Object(D.a)({},t)}}}),J=C,B=a(121),G=a(122),U=Object(A.compose)(Object(A.applyMiddleware)(B.a)),q=Object(A.createStore)(J,Object(G.composeWithDevTools)(U));s.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(k.a,{store:q,children:Object(M.jsx)(_,{})})}),document.getElementById("root"))}},[[229,1,2]]]);
//# sourceMappingURL=main.ae592fe5.chunk.js.map